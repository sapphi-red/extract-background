(self["webpackJsonpextract-background"]=self["webpackJsonpextract-background"]||[]).push([[0],{37:function(e,t,a){e.exports=function(){return new Worker(a.p+"0b26eb3f5427296162da.worker.js")}},45:function(e,t,a){e.exports=a(55)},50:function(e,t,a){},51:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),c=a.n(s),o=(a(50),a(51),a(11)),l=a(29),i=a(34),m=Object(i.a)(()=>{const e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)({phase:0,value:0}),c=Object(o.a)(s,2),i=c[0],m=c[1],u=Object(n.useState)(0),d=Object(o.a)(u,2),p=d[0],g=d[1],b=Object(n.useState)(0),h=Object(o.a)(b,2);return{fileUrl:a,setFileUrl:r,progress:i,setProgressValue:e=>m(t=>Object(l.a)({},t,{value:e})),incrementProgressPhase:()=>m(e=>Object(l.a)({},e,{phase:e.phase+1})),resetProgress:()=>m({phase:0,value:0}),startPos:p,setStartPos:g,endPos:h[0],setEndPos:h[1]}}),u=a(92),d=a(84);const p=(e,t,a)=>{let n=null;const r=e.target.files;r&&(n=r.item(0),n&&t(n.name)),null==n&&t("\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093"),((e,t,a)=>{""!==a&&URL.revokeObjectURL(a),e(t?URL.createObjectURL(t):"")})(a.setFileUrl,n,a.fileUrl)};var g=()=>{const e=m.useContainer(),t=Object(n.useState)("\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093"),a=Object(o.a)(t,2),s=a[0],c=a[1],l=e.progress.value>0;return r.a.createElement("div",{className:"input-video"},r.a.createElement("label",{htmlFor:"input-file-dom"},r.a.createElement(u.a,{variant:"contained",component:"span",disabled:l},r.a.createElement(d.a,null),"\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e: ",r.a.createElement("span",{className:"filename"},s))),r.a.createElement("input",{id:"input-file-dom",type:"file",accept:"video/*",disabled:l,onChange:t=>p(t,c,e)}))},b=a(86),h=a(85),f=a(87),w=a(89),v=a(90),E=a(88),j=a(37),P=a.n(j),O=a(16),y=a(91);var x=()=>{const e=m.useContainer();return r.a.createElement("div",{className:"position-setter",style:{display:"flex",alignItems:"center"}},r.a.createElement(h.a,{variant:"subtitle1",component:"span",style:{verticalAlign:"middle"}},"Position:"," "),r.a.createElement(y.a,{label:"Start",type:"number",value:e.startPos,size:"small",variant:"filled",onChange:t=>{e.setStartPos(+t.target.value)},style:{width:"5em"}}),r.a.createElement(y.a,{label:"End",type:"number",value:e.endPos,size:"small",variant:"filled",onChange:t=>{e.setEndPos(+t.target.value)},style:{width:"5em"}}))};const k=async e=>{e.readyState<3&&await new Promise(t=>{e.oncanplay=t})},C=async(e,t,a)=>{const n=new URLSearchParams(window.location.search.slice(1)),r="true"===n.get("p_time"),s="true"===n.get("debug"),c="true"===n.get("wasm"),o="true"===n.get("single");await k(e);const l=await createImageBitmap(e),i=l.width,m=l.height;t.innerHTML="";const u=document.createElement("canvas");u.width=i,u.height=m,t.appendChild(u),s&&console.log(i,m);const d=e.duration,p=u.transferControlToOffscreen(),g=await(async(e,t,a)=>{const n=Object(O.c)(new P.a),r=await new n;return await r.init(e,Object(O.b)(t,[t]),a),r})({width:i,height:m,duration:d,debugFlag:s,startPos:a.startPos,endPos:a.endPos,useWasm:c},p,o?1:Math.max(navigator.hardwareConcurrency-1,1));let b=0;return r&&(b=performance.now()),new Promise(t=>{g.run(Object(O.a)(async()=>{await k(e);try{const t=await createImageBitmap(e);return Object(O.b)([t,e.currentTime],[t])}catch(t){console.warn(t)}return null}),Object(O.a)(()=>{e.currentTime=a.startPos,a.incrementProgressPhase()}),Object(O.a)(()=>{e.currentTime++}),Object(O.a)(e=>{if(-1!==e)s&&console.log(e/(i*m)*100),a.setProgressValue(e/(i*m)*100);else{if(r){const e=performance.now();console.info(`Elapsed Time: ${(e-b)/1e3}s`)}t()}}))})};var U=()=>{const e=m.useContainer(),t=Object(n.useRef)(null),a=Object(n.useRef)(null);return r.a.createElement(b.a,{id:"app"},r.a.createElement(h.a,{variant:"h5",component:"h1"},"Extract background"),r.a.createElement(h.a,{component:"p"},"\u52d5\u753b\u304b\u3089\u4eba\u7269(\u4e00\u4eba\u306b\u9650\u308b)\u3092\u53d6\u308a\u9664\u3044\u305f\u80cc\u666f\u3092\u62bd\u51fa\u3057\u307e\u3059\u3002 \u5b9a\u70b9\u304b\u3089\u306e\u6620\u50cf\u3067\u3057\u304b\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002 \u307e\u305f\u3001Chrome\u3067\u3057\u304b\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002 \u5feb\u9069\u306a\u52d5\u4f5c\u306b\u306f\u305d\u3053\u305d\u3053\u306e\u30b9\u30da\u30c3\u30af\u3092\u8981\u6c42\u3057\u307e\u3059\u3002 Position\u306f\u51e6\u7406\u306b\u5229\u7528\u3057\u306a\u3044\u524d\u5f8c\u306e\u79d2\u6570\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002"),r.a.createElement(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:1},r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(x,null)),r.a.createElement(f.a,{item:!0},r.a.createElement(g,null)),r.a.createElement(f.a,{item:!0},r.a.createElement(u.a,{variant:"contained",color:"primary",disabled:""===e.fileUrl||0!==e.progress.phase,onClick:async()=>{t.current&&a.current&&(await C(t.current,a.current,e),e.resetProgress())}},"\u958b\u59cb",r.a.createElement(E.a,null),0!==e.progress.phase&&r.a.createElement(w.a,{size:24,className:"button-loading"})))),r.a.createElement(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:1},r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(v.a,{variant:"determinate",value:e.progress.value})),r.a.createElement(f.a,{item:!0},e.progress.value.toFixed(4),"%")),r.a.createElement("video",{id:"input",src:e.fileUrl,controls:!0,ref:t}),r.a.createElement("div",{id:"output",ref:a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(m.Provider,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[45,1,2]]]);
//# sourceMappingURL=main.0005f5ba.chunk.js.map