(self["webpackJsonpextract-background"]=self["webpackJsonpextract-background"]||[]).push([[0],{26:function(e,t,a){e.exports=function(){return new Worker(a.p+"688595e44a75f9582905.worker.js")}},31:function(e,t,a){e.exports=a(43)},36:function(e,t,a){},37:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(11),o=a.n(c),i=(a(36),a(37),a(8)),s=a(10),l=a(23);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p=Object(l.a)(()=>{const e=Object(r.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)({phase:0,value:0}),o=Object(i.a)(c,2),s=o[0],l=o[1];return{fileUrl:a,setFileUrl:n,progress:s,setProgressValue:e=>l(t=>m({},t,{value:e})),incrementProgressPhase:()=>l(e=>m({},e,{phase:e.phase+1})),resetProgress:()=>l({phase:0,value:0})}}),d=a(62),f=a(56);const g=(e,t,a)=>{let r=null;const n=e.target.files;n&&(r=n.item(0))&&t(r.name),null==r&&t("\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093"),((e,t,a)=>{""!==a&&URL.revokeObjectURL(a),e(t?URL.createObjectURL(t):"")})(a.setFileUrl,r,a.fileUrl)};var b=()=>{const e=p.useContainer(),t=Object(r.useState)("\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093"),a=Object(i.a)(t,2),c=a[0],o=a[1],s=e.progress.value>0;return n.a.createElement("div",{className:"input-video"},n.a.createElement("label",{htmlFor:"input-file-dom"},n.a.createElement(d.a,{variant:"contained",component:"span",disabled:s},n.a.createElement(f.a,null),"\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e: ",n.a.createElement("span",{className:"filename"},c))),n.a.createElement("input",{id:"input-file-dom",type:"file",accept:"video/*",disabled:s,onChange:t=>g(t,o,e)}))},h=a(57),w=a(58),O=a(59),v=a(61),E=a(63),j=a(60),y=a(26),P=a.n(y),k=a(19);const x=[.05,.1,.2,.3,.5,.8,1],U=async(e,t,a)=>{e.readyState<3&&await new Promise(t=>{e.oncanplay=t});const r=await createImageBitmap(e),n=r.width,c=r.height;t.innerHTML="";const o=document.createElement("canvas");o.width=n,o.height=c,t.appendChild(o),console.log(n,c);const i=e.duration,s=o.transferControlToOffscreen(),l=await(async(e,t)=>{const a=Object(k.b)(new P.a),r=await new a;return await r.init(e,Object(k.a)(t,[t])),r})({width:n,height:c},s);for(const m of x)for(console.log(`start THESHOLD: ${m}`),e.currentTime=0,a.incrementProgressPhase();e.currentTime<i;){e.readyState<3&&await new Promise(t=>{e.oncanplay=t});try{const t=await createImageBitmap(e),r=await l.apply(Object(k.a)(t,[t]),m);if(-1===r)return;console.log(r/(n*c)*100),a.setProgressValue(r/(n*c)*100)}catch(u){console.warn(u)}e.currentTime+=1}};var S=()=>{const e=p.useContainer(),t=Object(r.useRef)(null),a=Object(r.useRef)(null);return n.a.createElement(h.a,{id:"app"},n.a.createElement(w.a,{variant:"h5",component:"h1"},"Extract background"),n.a.createElement(w.a,{component:"p"},"\u52d5\u753b\u304b\u3089\u4eba\u7269(\u4e00\u4eba\u306b\u9650\u308b)\u3092\u53d6\u308a\u9664\u3044\u305f\u80cc\u666f\u3092\u62bd\u51fa\u3057\u307e\u3059\u3002 \u5b9a\u70b9\u304b\u3089\u306e\u6620\u50cf\u3067\u3057\u304b\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002 \u307e\u305f\u3001Chrome\u3067\u3057\u304b\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002 \u5feb\u9069\u306a\u52d5\u4f5c\u306b\u306f\u305d\u3053\u305d\u3053\u306e\u30b9\u30da\u30c3\u30af\u3092\u8981\u6c42\u3057\u307e\u3059\u3002"),n.a.createElement(O.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:1},n.a.createElement(O.a,{item:!0},n.a.createElement(b,null)),n.a.createElement(O.a,{item:!0},n.a.createElement(d.a,{variant:"contained",color:"primary",disabled:""===e.fileUrl||0!==e.progress.phase,onClick:async()=>{t.current&&a.current&&(await U(t.current,a.current,e),e.resetProgress())}},"\u958b\u59cb",n.a.createElement(j.a,null),0!==e.progress.phase&&n.a.createElement(v.a,{size:24,className:"button-loading"})))),n.a.createElement(O.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:1},n.a.createElement(O.a,{item:!0,xs:!0},n.a.createElement(E.a,{variant:"determinate",value:e.progress.value})),n.a.createElement(O.a,{item:!0},e.progress.value.toFixed(4),"%")),n.a.createElement("video",{id:"input",src:e.fileUrl,controls:!0,ref:t}),n.a.createElement("div",{id:"output",ref:a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(p.Provider,null,n.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[31,1,2]]]);
//# sourceMappingURL=main.02d9c55e.chunk.js.map