(self["webpackJsonpextract-background"]=self["webpackJsonpextract-background"]||[]).push([[0],{23:function(e,t,a){e.exports=function(){return new Worker(a.p+"8f0038f548a1ef94fe41.worker.js")}},28:function(e,t,a){e.exports=a(39)},33:function(e,t,a){},34:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),s=(a(33),a(34),a(8)),i=a(18),l=a(20),m=Object(l.a)(()=>{const e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({phase:0,value:0}),o=Object(s.a)(c,2),l=o[0],m=o[1];return{fileUrl:a,setFileUrl:r,progress:l,setProgressValue:e=>m(t=>Object(i.a)({},t,{value:e})),incrementProgressPhase:()=>m(e=>Object(i.a)({},e,{phase:e.phase+1})),resetProgress:()=>m({phase:0,value:0})}}),u=a(59),p=a(53);const d=(e,t,a)=>{let n=null;const r=e.target.files;r&&(n=r.item(0),n&&t(n.name)),null==n&&t("\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093"),((e,t,a)=>{""!==a&&URL.revokeObjectURL(a),e(t?URL.createObjectURL(t):"")})(a.setFileUrl,n,a.fileUrl)};var f=()=>{const e=m.useContainer(),t=Object(n.useState)("\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093"),a=Object(s.a)(t,2),c=a[0],o=a[1],i=e.progress.value>0;return r.a.createElement("div",{className:"input-video"},r.a.createElement("label",{htmlFor:"input-file-dom"},r.a.createElement(u.a,{variant:"contained",component:"span",disabled:i},r.a.createElement(p.a,null),"\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e: ",r.a.createElement("span",{className:"filename"},c))),r.a.createElement("input",{id:"input-file-dom",type:"file",accept:"video/*",disabled:i,onChange:t=>d(t,o,e)}))},g=a(54),h=a(55),w=a(56),E=a(58),b=a(60),v=a(57),j=a(23),O=a.n(j),y=a(16);const k=[.05,.1,.2,.3,.5,.8,1],P=async(e,t,a)=>{e.readyState<3&&await new Promise(t=>{e.oncanplay=t});const n=await createImageBitmap(e),r=n.width,c=n.height;t.innerHTML="";const o=document.createElement("canvas");o.width=r,o.height=c,t.appendChild(o),console.log(r,c);const s=e.duration,i=o.transferControlToOffscreen(),l=await(async(e,t)=>{const a=Object(y.b)(new O.a),n=await new a;return await n.init(e,Object(y.a)(t,[t])),n})({width:r,height:c},i);for(const u of k)for(console.log(`start THESHOLD: ${u}`),e.currentTime=0,a.incrementProgressPhase();e.currentTime<s;){e.readyState<3&&await new Promise(t=>{e.oncanplay=t});try{const t=await createImageBitmap(e),n=await l.apply(Object(y.a)(t,[t]),u);if(-1===n)return;console.log(n/(r*c)*100),a.setProgressValue(n/(r*c)*100)}catch(m){console.warn(m)}e.currentTime+=1}};var x=()=>{const e=m.useContainer(),t=Object(n.useRef)(null),a=Object(n.useRef)(null);return r.a.createElement(g.a,{id:"app"},r.a.createElement(h.a,{variant:"h5",component:"h1"},"Extract background"),r.a.createElement(h.a,{component:"p"},"\u52d5\u753b\u304b\u3089\u4eba\u7269(\u4e00\u4eba\u306b\u9650\u308b)\u3092\u53d6\u308a\u9664\u3044\u305f\u80cc\u666f\u3092\u62bd\u51fa\u3057\u307e\u3059\u3002 \u5b9a\u70b9\u304b\u3089\u306e\u6620\u50cf\u3067\u3057\u304b\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002 \u307e\u305f\u3001Chrome\u3067\u3057\u304b\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002 \u5feb\u9069\u306a\u52d5\u4f5c\u306b\u306f\u305d\u3053\u305d\u3053\u306e\u30b9\u30da\u30c3\u30af\u3092\u8981\u6c42\u3057\u307e\u3059\u3002"),r.a.createElement(w.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:1},r.a.createElement(w.a,{item:!0},r.a.createElement(f,null)),r.a.createElement(w.a,{item:!0},r.a.createElement(u.a,{variant:"contained",color:"primary",disabled:""===e.fileUrl||0!==e.progress.phase,onClick:async()=>{t.current&&a.current&&(await P(t.current,a.current,e),e.resetProgress())}},"\u958b\u59cb",r.a.createElement(v.a,null),0!==e.progress.phase&&r.a.createElement(E.a,{size:24,className:"button-loading"})))),r.a.createElement(w.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:1},r.a.createElement(w.a,{item:!0,xs:!0},r.a.createElement(b.a,{variant:"determinate",value:e.progress.value})),r.a.createElement(w.a,{item:!0},e.progress.value.toFixed(4),"%")),r.a.createElement("video",{id:"input",src:e.fileUrl,controls:!0,ref:t}),r.a.createElement("div",{id:"output",ref:a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(m.Provider,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.efc1f084.chunk.js.map